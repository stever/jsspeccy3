import * as assert from "assert";
import {bas2tap} from "../src/lib/bas2tap.js";

describe('bas2tap', () => {
    test('hello, world', () => {
        let bas = '';
        bas = bas + '10 PRINT "Hello, world!"\n';
        bas = bas + '20 GO TO 10';

        return bas2tap(bas).then(
            result => {
                expect(JSON.stringify(result)).toBe("{\"0\":19,\"1\":0,\"2\":0,\"3\":0,\"4\":98,\"5\":97,\"6\":115,\"7\":50,\"8\":116,\"9\":97,\"10\":112,\"11\":32,\"12\":32,\"13\":32,\"14\":35,\"15\":0,\"16\":0,\"17\":0,\"18\":35,\"19\":0,\"20\":7,\"21\":37,\"22\":0,\"23\":255,\"24\":0,\"25\":10,\"26\":17,\"27\":0,\"28\":245,\"29\":34,\"30\":72,\"31\":101,\"32\":108,\"33\":108,\"34\":111,\"35\":44,\"36\":32,\"37\":119,\"38\":111,\"39\":114,\"40\":108,\"41\":100,\"42\":33,\"43\":34,\"44\":13,\"45\":0,\"46\":20,\"47\":10,\"48\":0,\"49\":236,\"50\":49,\"51\":48,\"52\":14,\"53\":0,\"54\":0,\"55\":10,\"56\":0,\"57\":0,\"58\":13,\"59\":235}");
                console.log('Tests OK!');
            },
            error => {
                assert.fail(error);
            }
        );
    });
})
